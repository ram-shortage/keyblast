---
phase: 10-ux-polish
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - assets/icon.png
  - assets/icon-flash.png
autonomous: false

must_haves:
  truths:
    - "App has distinctive icon visible in system tray"
    - "Icon is recognizable and suggests keyboard/macro functionality"
    - "Flash variant is visually distinct from normal icon"
  artifacts:
    - path: "assets/icon.png"
      provides: "Main tray icon"
      min_size_bytes: 1000
    - path: "assets/icon-flash.png"
      provides: "Flash feedback icon"
      min_size_bytes: 1000
  key_links: []
---

<objective>
Create distinctive custom icons for KeyBlast.

Purpose: The current blue square placeholder is not recognizable. A distinctive icon helps users identify the app in the system tray and establishes brand identity.

Output: Custom icon.png (normal) and icon-flash.png (feedback) in assets directory.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-ux-polish/10-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create icon design and generate assets</name>
  <files>assets/icon.png, assets/icon-flash.png</files>
  <action>
Create custom icon using a simple, recognizable design. Research recommends:
- Lightning bolt (suggests "blast" / speed)
- Keyboard key with lightning
- Simple "KB" monogram

Requirements from research:
- 44x44 pixels for macOS tray (22pt @2x Retina)
- PNG format
- Normal icon: Primary colors, clean design
- Flash icon: Inverted or highlighted variant for visual feedback

Use Python with Pillow to generate programmatic icons:

```python
from PIL import Image, ImageDraw, ImageFont

def create_icon(size, is_flash=False):
    """Create a keyboard-lightning icon."""
    img = Image.new('RGBA', (size, size), (0, 0, 0, 0))
    draw = ImageDraw.Draw(img)

    # Background circle
    bg_color = (255, 200, 0, 255) if is_flash else (50, 50, 50, 255)  # Yellow flash, dark normal
    padding = size // 8
    draw.ellipse([padding, padding, size - padding, size - padding], fill=bg_color)

    # Lightning bolt
    bolt_color = (50, 50, 50, 255) if is_flash else (255, 200, 0, 255)  # Contrast with background
    cx, cy = size // 2, size // 2
    bolt_points = [
        (cx + size//6, cy - size//4),   # Top right
        (cx - size//12, cy),             # Middle left
        (cx + size//12, cy),             # Middle right
        (cx - size//6, cy + size//4),   # Bottom left
    ]
    draw.polygon(bolt_points, fill=bolt_color)

    return img

# Generate icons
normal = create_icon(44, is_flash=False)
normal.save('assets/icon.png')

flash = create_icon(44, is_flash=True)
flash.save('assets/icon-flash.png')
```

Alternative: If Pillow not available, create simple colored squares with distinct colors:
- Normal: Dark gray (#333333)
- Flash: Yellow (#FFCC00)

The key is visual distinction between states, not artistic perfection.
  </action>
  <verify>
1. `ls -la assets/` shows icon.png and icon-flash.png
2. Both files are valid PNG images
3. Files are approximately 44x44 pixels
4. Files are visually distinct from each other
  </verify>
  <done>
icon.png and icon-flash.png created with distinctive design.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Custom icon assets for KeyBlast tray icon</what-built>
  <how-to-verify>
1. Run the application: `cargo run --release`
2. Look at the system tray icon
3. Verify it's recognizable and not a plain square
4. Trigger a macro (Ctrl+Shift+K for example macro)
5. Observe the icon flash effect - should be visually distinct

Questions to consider:
- Is the icon recognizable in the tray?
- Does it suggest keyboard/macro functionality?
- Is the flash effect noticeable but not jarring?
- Does it look good on both light and dark menu bars?
  </how-to-verify>
  <resume-signal>Type "approved" to accept icons, or describe changes needed (e.g., "make it blue", "add keyboard outline")</resume-signal>
</task>

</tasks>

<verification>
1. Application shows new icon in system tray (not blue square)
2. Icon is visible and recognizable at tray size
3. Flash effect is visible when macro triggers
4. Icon works on macOS and Windows
</verification>

<success_criteria>
- UX-05 satisfied: Distinctive custom icon
- Normal and flash variants are visually distinct
- Icon communicates keyboard/macro theme
</success_criteria>

<output>
After completion, create `.planning/phases/10-ux-polish/10-04-SUMMARY.md`
</output>
